<!DOCTYPE html>
{% load static%}
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>{% block title %} AniMagic{% endblock %}</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="{% static 'css/tailwind.css' %}" />
		<head>
			<!-- One file includes all the Font Awesome Free icons and utilities -->
			<link
				href="{% static 'fontawesomefree/css/all.min.css' %}"
				rel="stylesheet"
				type="text/css"
			/>
		</head>
		<link
			rel="icon"
			type="image/x-icon"
			href="{% static 'img/favicon.ico' %}"
		/>
		<script type="text/javascript">
			var user = "{{request.user}}";

			function getToken(name) {
				let cookieValue = null;
				if (document.cookie && document.cookie !== "") {
					const cookies = document.cookie.split(";");
					for (let i = 0; i < cookies.length; i++) {
						const cookie = cookies[i].trim();
						// Does this cookie string begin with the name we want?
						if (cookie.substring(0, name.length + 1) === name + "=") {
							cookieValue = decodeURIComponent(
								cookie.substring(name.length + 1)
							);
							break;
						}
					}
				}
				return cookieValue;
			}
			var csrftoken = getToken("csrftoken");

			function getCookie(name) {
				//split coockie string and get all the individual name=value pairs in an array
				var cookieArr = document.cookie.split(";");

				for (var i = 0; i < cookieArr.length; i++) {
					var cookiePair = cookieArr[i].split("=");
					if (name == cookiePair[0].trim()) {
						return decodeURIComponent(cookiePair[1]);
					}
				}
				return null;
			}
			var cart = JSON.parse(getCookie("cart"));
			if (cart == null) {
				cart = {};
				console.log("Cart was created");
				document.cookie = "cart=" + JSON.stringify(cart) + ";domain=;path=/";
			}
			// console.log("Cart:", cart);
		</script>
        <!-- scripts for navigation menu -->
		<script>
			document.addEventListener("DOMContentLoaded", function () {
				const button = document.getElementById("navbar-toggle");
				const searchButton = document.getElementById("search-toggle");
				const menu = document.getElementById("navbar-search");

				searchButton.addEventListener("click", function () {
					menu.classList.toggle("hidden");
				});

				button.addEventListener("click", function () {
					menu.classList.toggle("hidden");
				});
			});
		</script>
	</head>

	<body class="font-[poppins] flex flex-col min-h-screen">
		<!-- nav bar content -->
		<!-- <nav class="bg-white border-gray-200 dark:bg-gray-900 shadow-md"> -->
		<nav
			class="p-2 bg-slate-900 shadow md:flex md:items-center md:justify-between top-0 right-0 left-0 w-full z-10 fixed"
		>
			<div
				class="w-full min-w-min flex flex-wrap items-center justify-between mx-auto p-4"
			>
            <a href="/">
                <img class="h-8" src="{% static 'img/logo.png' %}" alt="logo" />
            </a>
				<div class="flex md:order-1">
					<button
						id="search-toggle"
						type="button"
						data-collapse-toggle="navbar-search"
						aria-controls="navbar-search"
						aria-expanded="false"
						class="md:hidden text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 mr-1"
					>
						<svg
							class="w-5 h-5"
							aria-hidden="true"
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 20 20"
						>
							<path
								stroke="currentColor"
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
							/>
						</svg>
						<span class="sr-only">Search</span>
					</button>
					<div class="relative hidden md:block">
						<div
							class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
						>
							<svg
								class="w-4 h-4 text-gray-500 dark:text-gray-400"
								aria-hidden="true"
								xmlns="http://www.w3.org/2000/svg"
								fill="none"
								viewBox="0 0 20 20"
							>
								<path
									stroke="currentColor"
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
								/>
							</svg>
							<span class="sr-only">Search icon</span>
						</div>
						<input
							type="text"
							id="search-navbar"
							class="block w-96 p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
							placeholder="Search Tees, Action Figures..."
						/>
					</div>
					<button
						id="navbar-toggle"
						data-collapse-toggle="navbar-search"
						type="button"
						class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
						aria-controls="navbar-search"
						aria-expanded="false"
					>
						<span class="sr-only">Open main menu</span>
						<svg
							class="w-5 h-5"
							aria-hidden="true"
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 17 14"
						>
							<path
								stroke="currentColor"
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M1 1h15M1 7h15M1 13h15"
							/>
						</svg>
					</button>
				</div>
				<div
					class="items-center justify-between hidden w-full md:flex md:w-auto md:order-2"
					id="navbar-search"
				>
					<div class="relative mt-3 md:hidden">
						<div
							class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
						>
							<svg
								class="w-4 h-4 text-gray-500 dark:text-gray-400"
								aria-hidden="true"
								xmlns="http://www.w3.org/2000/svg"
								fill="none"
								viewBox="0 0 20 20"
							>
								<path
									stroke="currentColor"
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
								/>
							</svg>
						</div>
						<input
							type="text"
							id="search-navbar"
							class="block w-full p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
							placeholder="Search Tees, Action Figures..."
						/>
					</div>
					<ul
						class="flex flex-col p-4 md:p-0 mt-4 font-medium border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700"
					>
						<li class="rounded dark:hover:bg-gray-700">
							<a
								href="{% url 'wishlist' %}"
								class="block py-2 pl-3 pr-4 text-white border-slate-700 border-b-2 md:border-b-0 md:bg-transparent md:p-0"
								aria-current="page"
								><div class="relative">
									<i
										class="fa-regular fa-heart text-3xl text-gray-200 hover:text-red-600 transition duration-500"
									></i>
									<span class="md:hidden text-lg pl-3">Wishlist</span>
								</div></a
							>
						</li>
						<li>
							<a
								href="{% url 'cart' %}"
								class="block py-2 md:pl-0 pl-3 pr-4 text-gray-900 border-slate-700 border-b-2 md:border-b-0 hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-blue-500 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700"
								><div class="relative">
									<i
										class="fa-solid fa-cart-shopping text-3xl text-gray-200 hover:text-slate-400 transition duration-500"
									></i>
									<span
										class="absolute -top-1 left-[18px] inline-flex items-center justify-center rounded-full bg-emerald-500 px-1.5 text-xs text-white"
									>
                                    {{ cartItems }}
										<span class="sr-only"> Items</span>
									</span>
									<span class="md:hidden text-lg pl-3">Shopping Cart</span>
									<!-- End Rounded full basic sm sized badge -->

									<!-- <span
										class="absolute -top-2.5 -right-2 flex items-center justify-center w-5 h-5 ml-1 text-xs rounded-full bg-red-500"
									>
										0
										
									</span> -->
								</div></a
							>
						</li>
						<li>
							<button
								class="flex items-center hover:text-gray-400 transition duration-150 ease-in-out py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700"
								id="userDropdownToggle"
							>
								<a
									href="#"
									class="relative inline-flex items-center justify-center w-8 h-8 text-sm font-bold text-white rounded-full bg-sky-700"
								>
									DS
								</a>

								<span class="md:hidden text-lg pl-3">Hi, User</span>
							</button>

							<ul
								id="userDropdown"
								class="absolute right-0 text-white hidden w-32 py-2 mt-2 mr-2 bg-gray-800 rounded-lg shadow-xl"
							>
								<li>
									<a
										href=""
										class="block px-6 py-2 hover:bg-gray-700 transition duration-150 ease-in-out"
										>Profile</a
									>
								</li>
								<li>
									<a
										href="#"
										class="block px-6 py-2 hover:bg-gray-700 transition duration-150 ease-in-out"
										>Settings</a
									>
								</li>
								<li>
									<a
										href="#"
										class="block px-6 py-2 hover:bg-gray-700 transition duration-150 ease-in-out"
										>Logout</a
									>
								</li>
							</ul>
							<!-- <a
								href="#"
								class="block py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700"
								>Services</a
							> -->
						</li>
					</ul>
				</div>
			</div>
		</nav>

		{% block content %} {% endblock %}

		<!-- footer content -->

		<footer class="bg-white text-gray-400 mt-auto shadow dark:bg-gray-800">
			<div
				class="flex flex-col justify-between p-4 md:flex-row md:items-center"
			>
				<div class="mb-4 md:mb-0">
					© 2023
					<a href="{% url 'store' %}" class="hover:underline">AniMagic™</a>. All
					Rights Reserved.
				</div>

				<ul class="flex flex-wrap justify-center md:justify-end">
					<li>
						<a href="#" class="mr-4 hover:underline md:mr-6">About</a>
					</li>
					<li>
						<a href="#" class="mr-4 hover:underline md:mr-6">Privacy Policy</a>
					</li>
					<li>
						<a href="#" class="mr-4 hover:underline md:mr-6">Licensing</a>
					</li>
					<li>
						<a href="#" class="hover:underline">Contact</a>
					</li>
				</ul>
			</div>
		</footer>
		<!-- dropdown script for categories  -->
		<script>
			// Get elements
			const dropdownBtn = document.getElementById("dropdown-button");
			const dropdown = document.getElementById("dropdown");

			// Add event listener to toggle dropdown on click
			dropdownBtn.addEventListener("click", () => {
				dropdown.classList.toggle("hidden");
			});

			// Close dropdown if click outside
			document.addEventListener("click", (e) => {
				if (!dropdown.contains(e.target) && !dropdownBtn.contains(e.target)) {
					dropdown.classList.add("hidden");
				}
			});

			// Close dropdown if ESC key pressed
			document.addEventListener("keydown", (e) => {
				if (e.key === "Escape") {
					dropdown.classList.add("hidden");
				}
			});
		</script>
		<script>
			document.addEventListener("DOMContentLoaded", function () {
				const menuToggle = document.getElementById("hamburger-menu");
				const navMenu = document.querySelector("ul");

				menuToggle.addEventListener("click", function () {
					navMenu.classList.toggle("hidden");
				});
			});
		</script>
		<!-- dropdown script for usermenu  -->
		<script>
			// Get references to the toggle button and the dropdown menu
			const userDropdownToggle = document.getElementById("userDropdownToggle");
			const userDropdown = document.getElementById("userDropdown");

			// Function to toggle the visibility of the user dropdown
			function toggleUserDropdown() {
				userDropdown.classList.toggle("hidden");
			}

			// Close the user dropdown if the user clicks outside of it
			document.addEventListener("click", function (event) {
				if (
					userDropdown &&
					userDropdownToggle &&
					!userDropdownToggle.contains(event.target)
				) {
					userDropdown.classList.add("hidden");
				}
			});

			// Add a click event listener to the userDropdownToggle element
			userDropdownToggle.addEventListener("click", function (event) {
				event.stopPropagation(); // Prevent the click event from propagating to the document
				toggleUserDropdown();
			});
		</script>
		<script>
			function Menu(e) {
				let list = document.querySelector("ul");
				e.name === "menu"
					? ((e.name = "close"),
					  list.classList.add("top-[80px]"),
					  list.classList.add("opacity-100"))
					: ((e.name = "menu"),
					  list.classList.remove("top-[80px]"),
					  list.classList.remove("opacity-100"));
			}
		</script>
		<script type="text/javascript" src="{% static 'js/cart.js' %}"></script>
		<script type="text/javascript" src="{% static 'js/wishlist.js' %}"></script>
	</body>
</html>
